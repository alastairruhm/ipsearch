language: go

go: 
 - "1.8"
 - "1.9"

install:
  - go get github.com/mitchellh/gox
  - go get github.com/mattn/goveralls

script:
 - go test -v -covermode=count -coverprofile=coverage.out
 - goveralls -coverprofile=coverage.out -service=travis-ci -repotoken $COVERALLS_TOKEN
 - rm -f coverage.out

after_success:
  # - gox -os "linux darwin" -arch "386 amd64" -output "dist/{{.Dir}}_{{.OS}}_{{.Arch}}"
  - test -n "$TRAVIS_TAG" && curl -sL https://git.io/goreleaser | bash

notifications:
  email:
    recipients:
    - alastairruhm@gmail.com
